# Bitcoin Core configuration for solo mining on Raspberry Pi 5
# This config is optimized for running a pruned node with minimal disk usage

# ===== RPC (Remote Procedure Call) Settings =====
# RPC allows the miner software to connect to Bitcoin Core and submit mining results

# Enable RPC server - required for mining operations
server=1

# RPC authentication credentials
# These should match values in your .env file
# Generate secure credentials with: bash secrets/generate_secrets.sh
rpcuser=rpiminer
rpcpassword=changeme  # MUST change this! Run: bash secrets/generate_secrets.sh

# Only allow RPC connections from localhost (security measure)
rpcallowip=127.0.0.1

# RPC port (Bitcoin mainnet default)
rpcport=8332

# ===== Network Settings =====

# Accept incoming connections from other Bitcoin nodes
# This helps the network and ensures faster block propagation
listen=1

# Limit connections to conserve RPi resources
# 20 connections balance performance and resource usage
maxconnections=20

# ===== Blockchain Storage Settings (Pruning) =====

# Pruning keeps only the last N megabytes of blocks
# 5000 MB = 5GB - minimum for solo mining operations
# Full blockchain is 500+ GB, but we only need recent blocks for mining
prune=5000

# Disable transaction index to save space and memory
# Not needed for mining (only for blockchain explorers)
txindex=0

# ===== Mining Settings =====

# gen=0 disables Bitcoin Core's built-in CPU miner
# We use external cpuminer-opt which is more efficient
gen=0

# ===== Performance Optimization for Raspberry Pi =====

# Database cache size in megabytes
# Increased for better performance on RPi5
# Use 450 for 4GB model, 1000 for 8GB model
dbcache=450

# Maximum mempool size in MB
# Increased for better transaction handling
maxmempool=150

# Maximum orphan transactions to keep in memory
# Reduced to save resources
maxorphantx=10

# ===== Logging Settings =====
# Enable detailed logging for debugging

# Log RPC calls (shows miner communication)
debug=rpc

# Log network activity (shows blockchain sync progress)
debug=net

# Note: logs are stored in ~/.bitcoin/debug.log
# Clean periodically with: bitcoin-cli logging [] []